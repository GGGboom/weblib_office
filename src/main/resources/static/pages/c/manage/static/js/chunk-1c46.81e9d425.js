(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1c46"],{"3qKF":function(e,t,a){},"5+YZ":function(e,t,a){"use strict";a.r(t);var i=a("m1cH"),r=a.n(i),n=a("c9dD"),o={name:"addCategory",created:function(){var e=this;this.$root.$on("add-category",function(t){console.log(t),e.visible=!0,e.data=t,t.edit?(e.input=t.displayName,e.title="编辑分类",e.buttonText="保 存"):(e.title="新建分类",e.buttonText="确 定")})},data:function(){return{visible:!1,input:null,data:null,title:"编辑分类",buttonText:"确 定"}},methods:{addCategory:function(){var e=this;"编辑分类"===this.title?Object(n.o)({id:this.data.id,name:this.data.name,displayName:this.input}).then(function(t){(t=t.data).success&&(e.visible=!1,e.$message({message:"保存成功",type:"success"}))}):null===this.data?Object(n.b)({displayName:this.input,name:(new Date).getTime(),desc:""}).then(function(t){t=t.data,console.log(t),e.visible=!1,e.$message({message:"新建成功",type:"success"})}):Object(n.b)({parentId:this.data.id,displayName:this.input,name:(new Date).getTime(),desc:""}).then(function(t){t=t.data,e.visible=!1,e.$message({message:"新建成功",type:"success"})})}}},s=(a("Ktqe"),a("KHd+")),l=Object(s.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"400px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",[a("el-input",{attrs:{placeholder:"请输入分类名称"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addCategory}},[e._v(e._s(e.buttonText))])],1)])],1)},[],!1,null,"1619712b",null);l.options.__file="addCategory.vue";var c=l.exports,u={name:"addGroup",created:function(){var e=this;this.$root.$on("add-group",function(t){e.visible=!0,e.data=t,t.edit?(e.form.desc=t.desc,e.form.displayName=t.displayName,e.form.totalSize=t.totalSize/1024/1024+"GB",e.title="编辑柜子",e.buttonText="保 存"):(e.title="新建柜子",e.buttonText="确 定")})},data:function(){return{visible:!1,title:"新建柜子",buttonText:"确 定",form:{displayName:null,totalSize:"2GB",desc:null},data:null,rules:{displayName:[{required:!0,message:"请输入机构名称",trigger:"blur"}]}}},methods:{createGroup:function(){var e=this;if(null===this.data)this.$message({message:"请先选择一个分类",type:"warning"});else{var t=(new Date).getTime();"编辑柜子"===this.title?Object(n.p)({groupId:this.data.id,displayName:this.form.displayName,desc:this.form.desc,totalSize:1024*parseInt(this.form.totalSize.split("GB")[0])*1024,name:this.data.name}).then(function(t){(t=t.data).success&&(e.$message({message:"保存成功",type:"success"}),e.visible=!1)}):Object(n.d)({categoryId:void 0!==this.data.categoryId?this.data.categoryId:this.data.id,displayName:this.form.displayName,paiban:"Landscape",permissionType:2,singleFileSize:1048576,totalSize:1024*parseInt(this.form.totalSize.split("GB")[0])*1024,iconId:0,documentType:12,desc:this.form.desc,addr:t,name:t}).then(function(t){t=t.data,console.log(t),"success"===t.type&&(e.visible=!1,e.$message({message:"新建柜子成功",type:"success"}))})}}}},d=(a("6dHT"),Object(s.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"addGroupDialog",attrs:{title:e.title,visible:e.visible,width:"500px"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"addGroup",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"柜子名称",prop:"displayName"}},[a("el-input",{attrs:{placeholder:"请输入柜子名称"},model:{value:e.form.displayName,callback:function(t){e.$set(e.form,"displayName",t)},expression:"form.displayName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"柜子容量",prop:"totalSize"}},[a("el-select",{attrs:{placeholder:"请选择柜子容量"},model:{value:e.form.totalSize,callback:function(t){e.$set(e.form,"totalSize",t)},expression:"form.totalSize"}},[a("el-option",{attrs:{label:"2GB",value:"2GB"}},[e._v("2GB")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.createGroup}},[e._v(e._s(e.buttonText))])],1)],1)],1)},[],!1,null,"c5e21a74",null));d.options.__file="addGroup.vue";var p={name:"groupsTree",components:{addCategory:c,addGroup:d.exports},created:function(){},data:function(){return{treeData:[],loading:!1,visibleTree:!0,nodeData:null,defaultProps:{label:"displayName",isLeaf:function(e,t){return void 0!==e.categoryId},key:"id"}}},methods:{handleCommand:function(e){switch(e){case"newCategory":this.nodeData.edit=!1,this.$root.$emit("add-category",this.nodeData);break;case"newGroup":this.nodeData.edit=!1,this.$root.$emit("add-group",this.nodeData)}},handleEdit:function(e){var t=this;switch(e){case"edit":this.nodeData.edit=!0,void 0===this.nodeData.categoryId?this.$root.$emit("add-category",this.nodeData):this.$root.$emit("add-group",this.nodeData);break;case"delete":if(null===this.nodeData)return this.$message({message:"请先选择一个柜子/一个分类",type:"warning"}),!1;var a="";a=void 0===this.nodeData.categoryId?"此操作将永久删除该分类,请确认分类下是否有柜子再删除，是否继续?":"此操作将永久删除该柜子,是否继续?",this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){void 0===t.nodeData.categoryId?Object(n.f)({id:t.nodeData.id}).then(function(e){(e=e.data).success&&t.$message({message:"删除成功！",type:"success"})}):Object(n.h)({id:t.nodeData.id}).then(function(e){(e=e.data).success&&t.$message({message:"删除成功！",type:"success"})})})}},loadNode:function(e,t){var a=this;return 0===e.level?(setTimeout(function(){a.$refs.tree.setCurrentKey(0)},500),t([{displayName:"根目录",id:-1,fullName:"根目录",system:!1,leaf:!1}])):e.level>1?(this.getCategoriesWithManagedGroup(t,e),!1):void this.getCategoriesWithManagedGroup(t)},getCategoriesWithManagedGroup:function(e,t){var a=this;Object(n.l)({parentId:void 0===t?0:t.data.id,recursion:!1,type:"all"}).then(function(t){t=t.data,a.treeData=[].concat(r()(t.categories),r()(t.groups)),e(a.treeData)})},nodeClick:function(e){var t=this;this.nodeData=e,e.id,void 0!==e.categoryId&&(this.$store.dispatch("setGlobalParams",e),this.$root.$emit("groups-tree-click",e),Object(n.m)({groupId:e.id}).then(function(e){e=e.data,t.$root.$emit("percent-event",{res:e})}))}}},m=(a("VfRU"),Object(s.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"leftContainer",attrs:{"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[a("el-header",[a("el-row",[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple cardTitle"},[e._v("\n          文件柜\n        ")])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[a("el-button",{attrs:{type:"info",icon:"el-icon-plus"}})],1),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"newCategory"}},[e._v("新建分类")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"newGroup"}},[e._v("新建柜子")])],1)],1),e._v(" "),a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleEdit}},[a("span",{staticClass:"el-dropdown-link"},[a("el-button",{attrs:{type:"info",icon:"el-icon-more"}})],1),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"edit"}},[e._v("编辑")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"delete"}},[e._v("删除")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"leftContainerBody"},[e.visibleTree?a("el-tree",{ref:"tree",staticClass:"groupsTree",attrs:{load:e.loadNode,"default-expanded-keys":[-1],lazy:"","node-key":"id",props:e.defaultProps},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return a("span",{staticClass:"nodeSpan",attrs:{title:i.label,rel:r.id,relName:i.label,type:r.type}},[void 0!==r.categoryId?a("svg-icon",{staticStyle:{"font-size":"22px","margin-right":"2px",position:"relative",top:"3px"},attrs:{"icon-class":"cabinet"}}):e._e(),e._v("\n        "+e._s(i.label)+"\n      ")],1)}}])}):e._e()],1),e._v(" "),a("add-category"),e._v(" "),a("add-group")],1)},[],!1,null,"eaf04c0e",null));m.options.__file="groupsTree.vue";var h=m.exports,f=a("t3Un");function g(e){return Object(f.a)({url:"/user/joinGroup.action",method:"get",params:e})}function v(e){return Object(f.a)({url:"/user/getMembersInGroup.action",method:"get",headers:{noTips:!0},params:e})}var b={name:"authorize",created:function(){var e=this;this.$root.$on("reload-authorize-list",function(){e.getMembersInGroup(e.$store.getters.globalParams.id)}),this.$root.$on("groups-tree-click",function(t){e.getMembersInGroup(t.id)})},data:function(){return{visible:!1,loading:!1,switchTrigger:!0,userAuthorize:{userAll:[],userUpload:[],userCreate:[],userDel:[],userEdit:[]},teamAuthorize:{userAll:[],userUpload:[],userCreate:[],userDel:[],userEdit:[]},tableDataUser:[],tableDataGroup:[]}},methods:{slectAll:function(e){var t=this.userAuthorize.userAll[parseInt(e)],a=parseInt(e);this.userAuthorize.userCreate[a]=t,this.userAuthorize.userUpload[a]=t,this.userAuthorize.userDel[a]=t,this.userAuthorize.userEdit[a]=t},selectOther:function(e,t){var a=this,i=[];parseInt(this.userAuthorize.userCreate[t.$index])&&i.push("addDir"),parseInt(this.userAuthorize.userUpload[t.$index])&&i.push("upload"),parseInt(this.userAuthorize.userDel[t.$index])&&i.push("delete"),parseInt(this.userAuthorize.userEdit[t.$index])&&i.push("modify"),this.loading=!0,function(e){return Object(f.a)({url:"/user/modifyMemberGroupPermission.action",method:"get",params:e})}({perm:i.join("|"),groupId:this.$store.getters.globalParams.id,memberId:t.row.id}).then(function(e){a.loading=!1,e=e.data,console.log(e)}),console.log(i)},teamSlectAll:function(e){var t=this.teamAuthorize.userAll[parseInt(e)],a=parseInt(e);this.teamAuthorize.userCreate[a]=t,this.teamAuthorize.userUpload[a]=t,this.teamAuthorize.userDel[a]=t,this.teamAuthorize.userEdit[a]=t},teamSelectOther:function(e){console.log(e),console.log(this.teamAuthorize)},newUserHandler:function(){null!==this.$store.getters.globalParams?this.$root.$emit("jump-page",1):this.$message({message:"请先选择一个柜子！",type:"warning"})},getMembersInGroup:function(e){var t=this;this.loading=!0,v({groupId:parseInt(e),start:0,limit:99999}).then(function(e){if(t.loading=!1,!e)return t.tableDataUser=[],t.tableDataGroup=[],!1;e=e.data,t.tableDataUser=e.members.filter(function(e){return""===e.signatrue}),t.tableDataUser.forEach(function(e,a){var i=e.addDir,r=e.delete,n=e.modify,o=e.upload;t.userAuthorize.userUpload[a]=!0===o?"1":"0",t.userAuthorize.userCreate[a]=!0===i?"1":"0",t.userAuthorize.userDel[a]=!0===r?"1":"0",t.userAuthorize.userEdit[a]=!0===n?"1":"0",t.userAuthorize.userAll[a]=o&&i&&r&&n?"1":"0"}),t.tableDataGroup=e.members.filter(function(e){return""!==e.signatrue}),t.tableDataGroup.forEach(function(e,a){var i=e.addDir,r=e.delete,n=e.modify,o=e.upload;t.teamAuthorize.userUpload[a]=!0===o?"1":"0",t.teamAuthorize.userCreate[a]=!0===i?"1":"0",t.teamAuthorize.userDel[a]=!0===r?"1":"0",t.teamAuthorize.userEdit[a]=!0===n?"1":"0",t.teamAuthorize.userAll[a]=o&&i&&r&&n?"1":"0"})})}}},y=(a("dOV1"),Object(s.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"authorizeWrap",staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[a("el-header",[a("el-col",{attrs:{span:22}},[a("div",{staticClass:"grid-content bg-purple cardTitle"},[e._v("\n        文件柜授权\n      ")])]),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:2}},[a("el-button",{attrs:{type:"info",icon:"el-icon-plus",title:"授权用户"},on:{click:e.newUserHandler}})],1)],1),e._v(" "),a("div",{staticClass:"authorizeBodyWarp"},[a("h3",{staticClass:"title"},[e._v("授权用户")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataUser}},[a("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"title"},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"完全控制",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":"1","inactive-value":"0"},on:{change:function(a){e.slectAll(t.$index)}},model:{value:e.userAuthorize.userAll[t.$index],callback:function(a){e.$set(e.userAuthorize.userAll,t.$index,a)},expression:"userAuthorize.userAll[scope.$index]"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"下载",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc",disabled:""},model:{value:e.switchTrigger,callback:function(t){e.switchTrigger=t},expression:"switchTrigger"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上传",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":"1","inactive-value":"0"},on:{change:function(a){e.selectOther(e.userAuthorize.userUpload[t.$index],t)}},model:{value:e.userAuthorize.userUpload[t.$index],callback:function(a){e.$set(e.userAuthorize.userUpload,t.$index,a)},expression:"userAuthorize.userUpload[scope.$index]"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建文件夹",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":"1","inactive-value":"0"},on:{change:function(a){e.selectOther(e.userAuthorize.userCreate[t.$index],t)}},model:{value:e.userAuthorize.userCreate[t.$index],callback:function(a){e.$set(e.userAuthorize.userCreate,t.$index,a)},expression:"userAuthorize.userCreate[scope.$index]"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"删除",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":"1","inactive-value":"0"},on:{change:function(a){e.selectOther(e.userAuthorize.userDel[t.$index],t)}},model:{value:e.userAuthorize.userDel[t.$index],callback:function(a){e.$set(e.userAuthorize.userDel,t.$index,a)},expression:"userAuthorize.userDel[scope.$index]"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"修改",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":"1","inactive-value":"0"},on:{change:function(a){e.selectOther(e.userAuthorize.userEdit[t.$index],t)}},model:{value:e.userAuthorize.userEdit[t.$index],callback:function(a){e.$set(e.userAuthorize.userEdit,t.$index,a)},expression:"userAuthorize.userEdit[scope.$index]"}})]}}])})],1),e._v(" "),a("h3",{staticClass:"title"},[e._v("授权组织")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataGroup}},[a("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"title"},[e._v(e._s(t.row.name.split("/")[t.row.name.split("/").length-1]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"完全控制",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":"1","inactive-value":"0"},on:{change:function(a){e.teamSlectAll(t.$index)}},model:{value:e.teamAuthorize.userAll[t.$index],callback:function(a){e.$set(e.teamAuthorize.userAll,t.$index,a)},expression:"teamAuthorize.userAll[scope.$index]"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"下载",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc",disabled:""},model:{value:e.switchTrigger,callback:function(t){e.switchTrigger=t},expression:"switchTrigger"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上传",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":"1","inactive-value":"0"},on:{change:e.teamSelectOther},model:{value:e.teamAuthorize.userUpload[t.$index],callback:function(a){e.$set(e.teamAuthorize.userUpload,t.$index,a)},expression:"teamAuthorize.userUpload[scope.$index]"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建文件夹",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":"1","inactive-value":"0"},on:{change:e.teamSelectOther},model:{value:e.teamAuthorize.userCreate[t.$index],callback:function(a){e.$set(e.teamAuthorize.userCreate,t.$index,a)},expression:"teamAuthorize.userCreate[scope.$index]"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"删除",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":"1","inactive-value":"0"},on:{change:e.teamSelectOther},model:{value:e.teamAuthorize.userDel[t.$index],callback:function(a){e.$set(e.teamAuthorize.userDel,t.$index,a)},expression:"teamAuthorize.userDel[scope.$index]"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"修改",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ccc","active-value":"1","inactive-value":"0"},on:{change:e.teamSelectOther},model:{value:e.teamAuthorize.userEdit[t.$index],callback:function(a){e.$set(e.teamAuthorize.userEdit,t.$index,a)},expression:"teamAuthorize.userEdit[scope.$index]"}})]}}])})],1)],1)],1)},[],!1,null,"9a4f5758",null));y.options.__file="authorize.vue";var x=y.exports,_={name:"groupDetail",data:function(){return{num:0,resourcesSize:0,totalSize:0}},created:function(){var e=this;this.$root.$on("percent-event",function(t){var a=t.res.resourcesSize,i=t.res.totalSize;a<1024&&(e.resourcesSize=a.toFixed(2)+"KB"),a>=1024&&a<1048576&&(e.resourcesSize=(a/1024).toFixed(2)+"MB"),a>=1048576&&a<1073741824&&(e.resourcesSize=(a/1024/1024).toFixed(2)+"GB"),a>=1073741824&&(e.resourcesSize=(a/1024/1024/1024).toFixed(2)+"TB"),i<1024&&(e.totalSize=i.toFixed(2)+"KB"),i>=1024&&i<1048576&&(e.totalSize=(i/1024).toFixed(2)+"MB"),i>=1048576&&i<1073741824&&(e.totalSize=(i/1024/1024).toFixed(2)+"GB"),i>=1073741824&&(e.totalSize=(i/1024/1024/1024).toFixed(2)+"TB"),e.num=parseFloat((t.res.resourcesSize/t.res.totalSize*100).toFixed(2))})},methods:{}},w=(a("wxRq"),Object(s.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-header",[e._v("详细资料")]),e._v(" "),a("h3",{staticClass:"title"},[e._v("空间占用情况")]),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-progress",{staticClass:"percentage",attrs:{type:"circle",percentage:e.num,"stroke-width":10}})],1),e._v(" "),a("div",{staticClass:"footer"},[e._v("\n    已用："+e._s(e.resourcesSize)+" | 总共："+e._s(e.totalSize)+"\n  ")])],1)},[],!1,null,"d30132d6",null));w.options.__file="detail.vue";var $={name:"front",components:{groupsTree:h,authorize:x,detail:w.exports},data:function(){return{}},created:function(){},methods:{}},z=(a("ilUi"),Object(s.a)($,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-container",{staticClass:"mainContainer",staticStyle:{height:"100%"}},[t("el-aside",{staticClass:"user-aside",staticStyle:{"background-color":"#1e2022",overflow:"hidden"},attrs:{width:"260px"}},[t("groups-tree")],1),this._v(" "),t("el-container",{staticClass:"middleWrap"},[t("authorize")],1),this._v(" "),t("el-aside",[t("detail")],1)],1)],1)},[],!1,null,"dd433138",null));z.options.__file="front.vue";var S=z.exports,C=a("YEIV"),k=a.n(C),A={name:"userAuthorize",created:function(){var e=this;setTimeout(function(){e.getMembersInGroup()},500)},data:function(){var e;return e={globalParams:this.$store.getters.globalParams,treeData:[],loading:!1,pageLoading:!1,visibleTree:!0,defaultProps:{label:"text",isLeaf:function(e,t){return"team"===e.type},disabled:function(e,t){return"team"!==e.type}},filterText:"",saveSetTimeoutSearch:null,noMarginRight:"",defaultOrg:[{}],orgTree:[],tableKey:0},k()(e,"loading",!1),k()(e,"users",[]),k()(e,"query",{loginName:"",pageNum:1,pageSize:20}),k()(e,"total",0),k()(e,"orgSelections",""),k()(e,"orgSelectionsName",""),k()(e,"orgSelectionsArr",[]),k()(e,"orgTags",[]),k()(e,"userTags",[]),k()(e,"userSelections",[]),k()(e,"userSelectionsAll",[]),k()(e,"tableData",[]),e},methods:{groperCallbackFunc:function(e){var t=this;this.showPage=!1,this.loading=!0,this.text=" ",Object(n.n)({folderOnly:!1,id:e.id,type:"team",withoutLeaf:!0}).then(function(e){t.loading=!1,(e=e.data).members.length>0?t.members=e.members.map(function(e){return{account:e.text,name:e.fullName,position:e.positoin,department:e.department,id:e.id,status:e.status}}):t.text="暂无数据",t.tableData=t.members,t.$nextTick(function(){})})},loadNode:function(e,t){var a=this;return 0===e.level?(setTimeout(function(){a.$refs.tree.setCurrentKey(0)},500),t([{text:"根目录",id:-1,fullName:"根目录",system:!1,leaf:!1}])):e.level>1?(Object(n.n)({folderOnly:!1,id:e.data.id,type:"folder",withoutLeaf:!0}).then(function(e){e=e.data,a.treeData=e.members,t(a.treeData)}),!1):void Object(n.n)({folderOnly:!1,id:0,type:"folder",withoutLeaf:!0}).then(function(e){e=e.data,a.treeData=e.members,t(a.treeData)})},backHandle:function(){this.$root.$emit("jump-page",0),this.$root.$emit("reload-authorize-list")},handleSelectionChange:function(e){this.userSelections=e},updateRoleOrgs:function(){var e=this,t=this.$refs.tree.getCheckedNodes();if(t.length<1)this.$message({message:"至少选择一个选项",type:"warning"});else{var a=t.map(function(e){return e.fullName});g({groupId:this.globalParams.id,name:a.join(","),type:"god"}).then(function(t){(t=t.data).success&&(e.getMembersInGroup(),e.$refs.tree.setCheckedNodes([]))})}},updateRoleUsers:function(){var e=this;if(this.userSelections.length<1)this.$message({message:"至少选择一个选项",type:"warning"});else{var t=this.userSelections.map(function(e){return e.account});g({groupId:this.globalParams.id,name:t.join(","),type:"god"}).then(function(t){(t=t.data).success&&(e.getMembersInGroup(),e.$refs.userTable.clearSelection())})}},orgTagsHandleClose:function(e){var t=this;this.$confirm("确定移除 "+(e.name.split("/").length>1?e.name.split("/").join(" - "):e.name)+" 吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(e){return Object(f.a)({url:"/user/deleteMemberFromGroup.action",method:"get",params:e})})({memberId:e.id,groupId:t.globalParams.id}).then(function(e){e=e.data,t.getMembersInGroup()})}).catch(function(){})},doSearchUsers:function(){},nodeClick:function(e){"team"===e.type&&this.groperCallbackFunc(e)},getMembersInGroup:function(){var e=this;this.pageLoading=!0,void 0!==this.globalParams.categoryId&&v({groupId:this.globalParams.id,start:0,limit:99999}).then(function(t){e.pageLoading=!1;var a=(t=t.data).members.filter(function(e){return""!==e.signatrue}),i=t.members.filter(function(e){return""===e.signatrue});e.orgTags=a,e.userTags=i})}}},T=(a("JnB2"),Object(s.a)(A,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"userAuthorizeWrap",attrs:{"element-loading-text":"加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-header",[a("el-button",{attrs:{type:"info"},on:{click:e.backHandle}},[e._v("返回")]),e._v(" "),a("span",{staticStyle:{"padding-left":"10px"}},[e._v("添加授权")])],1),e._v(" "),a("div",{staticClass:"margin24",staticStyle:{"margin-bottom":"14px",padding:"15px","padding-bottom":"0"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("已分配机构")])]),e._v(" "),a("div",{staticClass:"text item",staticStyle:{height:"90px",overflow:"auto"}},e._l(e.orgTags,function(t){return a("el-tag",{key:t.id,attrs:{closable:"","disable-transitions":!0,title:t.name},on:{close:function(a){e.orgTagsHandleClose(t)}}},[e._v("\n              "+e._s(t.name.split("/")[t.name.split("/").length-1])+"\n            ")])}))])],1),e._v(" "),a("el-col",{staticStyle:{padding:"0 5px"},attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("已分配用户")])]),e._v(" "),a("div",{staticClass:"text item",staticStyle:{height:"90px",overflow:"auto"}},e._l(e.userTags,function(t){return a("el-tag",{key:t.id,attrs:{closable:"","disable-transitions":!0,title:""},on:{close:function(a){e.orgTagsHandleClose(t)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])}))])],1)],1)],1),e._v(" "),a("div",{staticClass:"app-container margin-content padding-content selectWrap"},[a("el-container",[a("el-aside",{attrs:{width:"380px"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"header fl"},[e._v("选择机构")]),e._v(" "),a("div",{staticClass:"extra fr"},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入机构名"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateRoleOrgs()}}},[e._v("分配机构")])],1)]),e._v(" "),a("el-scrollbar",{class:e.noMarginRight,attrs:{native:!1,"wrap-class":"scroll-list"}},[e.visibleTree?a("el-tree",{ref:"tree",staticClass:"groupsTree",attrs:{load:e.loadNode,"show-checkbox":"","default-expanded-keys":[-1],lazy:"","node-key":"id",props:e.defaultProps},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return a("span",{staticClass:"nodeSpan",attrs:{title:i.label,rel:r.id,relName:i.label,type:r.type}},[void 0!==r.categoryId?a("svg-icon",{staticStyle:{"font-size":"22px","margin-right":"2px",position:"relative",top:"3px"},attrs:{"icon-class":"cabinet"}}):e._e(),e._v("\n                  "+e._s(i.label)+"\n                ")],1)}}])}):e._e()],1)],1)],1),e._v(" "),a("el-main",{staticStyle:{"margin-left":"10px",padding:"0"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"header fl"},[e._v("选择用户 - "+e._s(""===e.orgSelectionsName?"全部":e.orgSelectionsName))]),e._v(" "),a("div",{staticClass:"extra fr"},[a("el-input",{staticStyle:{width:"150px"},attrs:{"change-on-select":"",placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return e.doSearchUsers(t)}},model:{value:e.query.loginName,callback:function(t){e.$set(e.query,"loginName",t)},expression:"query.loginName"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateRoleUsers()}}},[e._v("分配用户")])],1)]),e._v(" "),a("div",{staticClass:"clearfix"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:e.tableKey,ref:"userTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"加载中...",height:"400"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户名",property:"account"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",property:"name",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"部门",property:"department",width:"120"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.users.length>0,expression:"users.length > 0"}],staticClass:"pagination-container align-right"},[a("el-pagination",{attrs:{"current-page":e.query.pageNum,"page-size":e.query.pageSize,layout:"total, prev, pager, next",total:e.total}})],1)],1)])],1)],1)],1)],1)},[],!1,null,"0e3d0595",null));T.options.__file="userAuthorize.vue";var D={name:"groupsIndex",components:{front:S,userAuthorize:T.exports},computed:{currentView:function(){return this.views[this.index]}},data:function(){return{index:0,views:["front","userAuthorize"],pages:["front"]}},created:function(){var e=this;this.$root.$on("jump-page",function(t){e.changeView(t)})},methods:{changeView:function(e){this.index=e},back:function(){this.changeView(0)}}},O=(a("tjA2"),Object(s.a)(D,function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("keep-alive",{attrs:{include:this.pages}},[t(this.currentView,{tag:"component"})],1)],1)},[],!1,null,"085a6841",null));O.options.__file="index.vue";t.default=O.exports},"6dHT":function(e,t,a){"use strict";var i=a("g0I0");a.n(i).a},"8qFU":function(e,t,a){},JnB2:function(e,t,a){"use strict";var i=a("kPa8");a.n(i).a},Ktqe:function(e,t,a){"use strict";var i=a("Z3co");a.n(i).a},"RU/L":function(e,t,a){a("Rqdy");var i=a("WEpk").Object;e.exports=function(e,t,a){return i.defineProperty(e,t,a)}},Rqdy:function(e,t,a){var i=a("Y7ZC");i(i.S+i.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(e,t,a){e.exports={default:a("RU/L"),__esModule:!0}},VfRU:function(e,t,a){"use strict";var i=a("8qFU");a.n(i).a},YEIV:function(e,t,a){"use strict";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(a("SEkw"));t.default=function(e,t,a){return t in e?(0,i.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},Z3co:function(e,t,a){},c9dD:function(e,t,a){"use strict";a.d(t,"n",function(){return r}),a.d(t,"c",function(){return n}),a.d(t,"e",function(){return o}),a.d(t,"i",function(){return s}),a.d(t,"g",function(){return l}),a.d(t,"j",function(){return c}),a.d(t,"k",function(){return u}),a.d(t,"a",function(){return d}),a.d(t,"l",function(){return p}),a.d(t,"b",function(){return m}),a.d(t,"d",function(){return h}),a.d(t,"h",function(){return f}),a.d(t,"o",function(){return g}),a.d(t,"p",function(){return v}),a.d(t,"f",function(){return b}),a.d(t,"m",function(){return y});var i=a("t3Un");function r(e){return Object(i.a)({url:"/grouper/grouperTree.action",method:"post",params:e})}function n(e){return Object(i.a)({url:"/grouper/createFolder.action",method:"post",params:e})}function o(e){return Object(i.a)({url:"/grouper/createTeam.action",method:"post",params:e})}function s(e){return Object(i.a)({url:"/grouper/deleteTeam.action",method:"post",params:e})}function l(e){return Object(i.a)({url:"/grouper/deleteFolder.action",method:"post",params:e})}function c(e){return Object(i.a)({url:"/grouper/editFolder.action",method:"post",params:e})}function u(e){return Object(i.a)({url:"/grouper/editTeam.action",method:"post",params:e})}function d(e){return Object(i.a)({url:"/user/advancedSearch.action",method:"post",params:e})}function p(e){return Object(i.a)({url:"/category/getCategoriesWithManagedGroup.action",method:"post",params:e})}function m(e){return Object(i.a)({url:"/category/createCategory.action",method:"post",params:e})}function h(e){return Object(i.a)({url:"/group/createGroup.action",method:"post",params:e})}function f(e){return Object(i.a)({url:"/group/deleteGroup.action",method:"post",params:e})}function g(e){return Object(i.a)({url:"/category/modifyCategory.action",method:"post",params:e})}function v(e){return Object(i.a)({url:"/group/modifyGroup.action",method:"post",params:e})}function b(e){return Object(i.a)({url:"/category/deleteCategory.action",method:"post",params:e})}function y(e){return Object(i.a)({url:"/group/getResourceSize.action",method:"post",params:e})}},dOV1:function(e,t,a){"use strict";var i=a("wdQJ");a.n(i).a},g0I0:function(e,t,a){},ilUi:function(e,t,a){"use strict";var i=a("3qKF");a.n(i).a},kPa8:function(e,t,a){},rIy6:function(e,t,a){},tjA2:function(e,t,a){"use strict";var i=a("xuuR");a.n(i).a},wdQJ:function(e,t,a){},wxRq:function(e,t,a){"use strict";var i=a("rIy6");a.n(i).a},xuuR:function(e,t,a){}}]);